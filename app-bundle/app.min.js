(()=>{var e={908:(e,s,t)=>{var r=t(685),n=(t(738).config(),t(113).randomUUID),o=t(5),i=o.uuid_valid,a=o.validate_post_data,u=process.env.PORT||null;null===u&&(console.log("\nNot set port or not found .env file"),process.exit());var d=[];r.createServer((function(e,s){process.stdout.write("\nMethod: "+e.method+"\nRequest URL: "+e.url+"\n"),s.setHeader("Content-Type","application/json");try{switch(!0){case"/api/users"===e.url&&("GET"===e.method||"HEAD"===e.method):p(e,s);break;case"/api/users"===e.url&&"POST"===e.method:l(e,s);break;case!e.url.match("/api/users/[a-zA-Z0-9-]+$")?null:"GET"===e.method||"HEAD"===e.method:case!e.url.match("/api/users/[a-zA-Z0-9-]+$")?null:"PUT"===e.method:f(e,s);break;case!e.url.match("/api/users/[a-zA-Z0-9-]+$")?null:"DELETE"===e.method:g(e,s);break;default:c(s)}}catch(e){s.writeHead(JSON.parse(e.message).statusCode),s.write(e.message),s.end("\n")}})).listen(u,"127.0.0.1",(function(){console.log("Start http server!"),console.log("Сервер начал прослушивание запросов на порту "+u)}));var c=function(e){process.stdout.write("Status: 404\nResponse: endpoints not found\n");throw new Error(JSON.stringify({statusCode:404,message:"Uri api http not found"}))},p=function(e,s){process.stdout.write("Status: 200\nResponse: request success\n"),s.statusCode=200,s.write(JSON.stringify(d)+"\n"),s.end()},l=function(e,s){var t="";e.on("data",(function(e){t+=e.toString()})),e.on("end",(function(){try{var e=a(t);if(e.statusCode)throw new Error(JSON.stringify(e));e.uuid=n(),d.push(e),process.stdout.write("Status: 201\nResponse: create user success\n"),s.writeHead(201),s.write(JSON.stringify(e)),s.end("\n")}catch(e){s.writeHead(JSON.parse(e.message).statusCode),s.write(e.message),s.end()}}))},f=function(e,s){var t=e.url.split("/").slice(-1).join();if(!i(t)){process.stdout.write("Status: 400\nResponse: in valid uuid\n");throw new Error(JSON.stringify({statusCode:400,message:"Get parametr uuid not valid"}))}var r=d.find((function(e){return e.uuid===t}));if(!r){process.stdout.write("Status: 404\nResponse: not found user\n");throw new Error(JSON.stringify({statusCode:404,message:"Not found users is get UUID"}))}process.stdout.write("Status: 200\nResponse: get user success\n"),s.writeHead(200),s.write(JSON.stringify(r)),s.end("\n")},g=function e(s,t){var r=s.url.split("/").slice(-1).join();if(!i(r)){process.stdout.write("Status: 400\nResponse: in valid uuid\n");throw new Error(JSON.stringify({statusCode:400,message:"Get parametr uuid not valid"}))}var n=d.findIndex((function(e){return e.uuid===r}));if(-1==n){process.stdout.write("Status: 404\nResponse: not found user\n");throw new Error(JSON.stringify({statusCode:404,message:"Not found users is get UUID"}))}d.splice(n,1);e.length>0&&(process.stdout.write("Status: 204\nResponse: delete user success\n"),t.writeHead(204),t.end())}},505:()=>{process.on("SIGINT",(function(e){process.exit()})),process.on("exit",(function(e){console.log("\nServer is stoped")}))},5:e=>{e.exports={uuid_valid:function(e){return!![/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1][0-9a-fA-F]{3}-[89AB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}$/gi,/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[2][0-9a-fA-F]{3}-[89AB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}$/gi,/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[3][0-9a-fA-F]{3}-[89AB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}$/gi,/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[4][0-9a-fA-F]{3}-[89AB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}$/gi,/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[5][0-9a-fA-F]{3}-[89AB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}$/gi].find((function(s){return!0===s.test(e)}))},validate_post_data:function(e){try{var s=JSON.parse(e);if("number"==typeof s.age&&"string"==typeof s.username&&Array.isArray(s.hobbies)&&!s.hobbies.find((function(e){return"string"!=typeof e})))return s;process.stdout.write("Status: 400\nError validate request body. Check for required fields\n");return{statusCode:400,message:"Error validate request body. Check for required fields"}}catch(e){process.stdout.write("Status: 400\n"+e.message+"\n");var t={statusCode:400,message:e.message};throw new Error(JSON.stringify(t))}}}},738:(e,s,t)=>{const r=t(147),n=t(17),o=t(37),i=t(968).version,a=/(?:^|^)\s*(?:export\s+)?([\w.-]+)(?:\s*=\s*?|:\s+?)(\s*'(?:\\'|[^'])*'|\s*"(?:\\"|[^"])*"|\s*`(?:\\`|[^`])*`|[^#\r\n]+)?\s*(?:#.*)?(?:$|$)/gm;function u(e){console.log(`[dotenv@${i}][DEBUG] ${e}`)}const d={config:function(e){let s=n.resolve(process.cwd(),".env"),t="utf8";const i=Boolean(e&&e.debug),a=Boolean(e&&e.override);var c;e&&(null!=e.path&&(s="~"===(c=e.path)[0]?n.join(o.homedir(),c.slice(1)):c),null!=e.encoding&&(t=e.encoding));try{const e=d.parse(r.readFileSync(s,{encoding:t}));return Object.keys(e).forEach((function(s){Object.prototype.hasOwnProperty.call(process.env,s)?(!0===a&&(process.env[s]=e[s]),i&&u(!0===a?`"${s}" is already defined in \`process.env\` and WAS overwritten`:`"${s}" is already defined in \`process.env\` and was NOT overwritten`)):process.env[s]=e[s]})),{parsed:e}}catch(e){return i&&u(`Failed to load ${s} ${e.message}`),{error:e}}},parse:function(e){const s={};let t,r=e.toString();for(r=r.replace(/\r\n?/gm,"\n");null!=(t=a.exec(r));){const e=t[1];let r=t[2]||"";r=r.trim();const n=r[0];r=r.replace(/^(['"`])([\s\S]*)\1$/gm,"$2"),'"'===n&&(r=r.replace(/\\n/g,"\n"),r=r.replace(/\\r/g,"\r")),s[e]=r}return s}};e.exports.config=d.config,e.exports.parse=d.parse,e.exports=d},113:e=>{"use strict";e.exports=require("crypto")},147:e=>{"use strict";e.exports=require("fs")},685:e=>{"use strict";e.exports=require("http")},37:e=>{"use strict";e.exports=require("os")},17:e=>{"use strict";e.exports=require("path")},968:e=>{"use strict";e.exports=JSON.parse('{"name":"dotenv","version":"16.0.3","description":"Loads environment variables from .env file","main":"lib/main.js","types":"lib/main.d.ts","exports":{".":{"require":"./lib/main.js","types":"./lib/main.d.ts","default":"./lib/main.js"},"./config":"./config.js","./config.js":"./config.js","./lib/env-options":"./lib/env-options.js","./lib/env-options.js":"./lib/env-options.js","./lib/cli-options":"./lib/cli-options.js","./lib/cli-options.js":"./lib/cli-options.js","./package.json":"./package.json"},"scripts":{"dts-check":"tsc --project tests/types/tsconfig.json","lint":"standard","lint-readme":"standard-markdown","pretest":"npm run lint && npm run dts-check","test":"tap tests/*.js --100 -Rspec","prerelease":"npm test","release":"standard-version"},"repository":{"type":"git","url":"git://github.com/motdotla/dotenv.git"},"keywords":["dotenv","env",".env","environment","variables","config","settings"],"readmeFilename":"README.md","license":"BSD-2-Clause","devDependencies":{"@types/node":"^17.0.9","decache":"^4.6.1","dtslint":"^3.7.0","sinon":"^12.0.1","standard":"^16.0.4","standard-markdown":"^7.1.0","standard-version":"^9.3.2","tap":"^15.1.6","tar":"^6.1.11","typescript":"^4.5.4"},"engines":{"node":">=12"}}')}},s={};function t(r){var n=s[r];if(void 0!==n)return n.exports;var o=s[r]={exports:{}};return e[r](o,o.exports,t),o.exports}t(908),t(505)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0FDYixDQUVBLE9BQU9KLENBQ1QsR0ErREF0QyxFQUFPQyxRQUFRZ0IsT0FBU0QsRUFBYUMsT0FDckNqQixFQUFPQyxRQUFRMUIsTUFBUXlDLEVBQWF6QyxNQUNwQ3lCLEVBQU9DLFFBQVVlLEMsdUJDL0dqQmhCLEVBQU9DLFFBQVV0RCxRQUFRLFMsdUJDQXpCcUQsRUFBT0MsUUFBVXRELFFBQVEsSyx1QkNBekJxRCxFQUFPQyxRQUFVdEQsUUFBUSxPLHNCQ0F6QnFELEVBQU9DLFFBQVV0RCxRQUFRLEssc0JDQXpCcUQsRUFBT0MsUUFBVXRELFFBQVEsTyx1dkNDQ3JCa0csRUFBMkIsQ0FBQyxFQUdoQyxTQUFTQyxFQUFvQkMsR0FFNUIsSUFBSUMsRUFBZUgsRUFBeUJFLEdBQzVDLFFBQXFCRSxJQUFqQkQsRUFDSCxPQUFPQSxFQUFhL0MsUUFHckIsSUFBSUQsRUFBUzZDLEVBQXlCRSxHQUFZLENBR2pEOUMsUUFBUyxDQUFDLEdBT1gsT0FIQWlELEVBQW9CSCxHQUFVL0MsRUFBUUEsRUFBT0MsUUFBUzZDLEdBRy9DOUMsRUFBT0MsT0FDZixDQ3JCWXRELEVBQVEsS0FFTEEsRUFBUSxJIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2ltcGxlLWFwaS8uL2FwcC9hcGkuanMiLCJ3ZWJwYWNrOi8vc2ltcGxlLWFwaS8uL2FwcC9ldmVudHMuanMiLCJ3ZWJwYWNrOi8vc2ltcGxlLWFwaS8uL2FwcC92YWxpZGF0ZXMuanMiLCJ3ZWJwYWNrOi8vc2ltcGxlLWFwaS8uL25vZGVfbW9kdWxlcy9kb3RlbnYvbGliL21haW4uanMiLCJ3ZWJwYWNrOi8vc2ltcGxlLWFwaS9leHRlcm5hbCBub2RlLWNvbW1vbmpzIFwiY3J5cHRvXCIiLCJ3ZWJwYWNrOi8vc2ltcGxlLWFwaS9leHRlcm5hbCBub2RlLWNvbW1vbmpzIFwiZnNcIiIsIndlYnBhY2s6Ly9zaW1wbGUtYXBpL2V4dGVybmFsIG5vZGUtY29tbW9uanMgXCJodHRwXCIiLCJ3ZWJwYWNrOi8vc2ltcGxlLWFwaS9leHRlcm5hbCBub2RlLWNvbW1vbmpzIFwib3NcIiIsIndlYnBhY2s6Ly9zaW1wbGUtYXBpL2V4dGVybmFsIG5vZGUtY29tbW9uanMgXCJwYXRoXCIiLCJ3ZWJwYWNrOi8vc2ltcGxlLWFwaS93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9zaW1wbGUtYXBpLy4vYXBwL2FwcC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBodHRwID0gcmVxdWlyZShcImh0dHBcIik7XG5jb25zdCBlbnYgPSByZXF1aXJlKCdkb3RlbnYnKS5jb25maWcoKTtcbmNvbnN0IHsgcmFuZG9tVVVJRCB9ID0gcmVxdWlyZSgnY3J5cHRvJyk7XG5jb25zdCB7dXVpZF92YWxpZCwgdmFsaWRhdGVfcG9zdF9kYXRhIH0gID0gcmVxdWlyZSgnLi92YWxpZGF0ZXMuanMnKTtcblxuY29uc3QgUE9SVCA9IHByb2Nlc3MuZW52LlBPUlQgfHwgbnVsbDtcbmlmIChQT1JUID09PSBudWxsKSB7XG4gICAgY29uc29sZS5sb2coXCJcXG5Ob3Qgc2V0IHBvcnQgb3Igbm90IGZvdW5kIC5lbnYgZmlsZVwiKTtcbiAgICBwcm9jZXNzLmV4aXQoKTtcbn1cblxuLy8gYXJyYXkgZGF0YSBpbi1tZW1vcnlcbmNvbnN0IHVzZXJzID0gW107XG5cbi8vIEFwaSBzZXJ2ZXJcbmh0dHAuY3JlYXRlU2VydmVyKGZ1bmN0aW9uKHJlcXVlc3QscmVzcG9uc2Upe1xuICAgIHByb2Nlc3Muc3Rkb3V0LndyaXRlKFwiXFxuTWV0aG9kOiBcIisgcmVxdWVzdC5tZXRob2QgKyBcIlxcblJlcXVlc3QgVVJMOiBcIiArIHJlcXVlc3QudXJsICsgXCJcXG5cIik7XG4gICAgcmVzcG9uc2Uuc2V0SGVhZGVyKFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvblwiKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAvLyByb3V0ZXIgXG4gICAgICAgICAgICAgICAgc3dpdGNoKHRydWUpe1xuICAgICAgICAgICAgICAgICAgICAvL2dldCBhbGwgdXNlcnMgKGdldCBvciBoZWFkIHJlcXVlc3QpXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgKHJlcXVlc3QudXJsID09PSAnL2FwaS91c2VycycgJiYgKHJlcXVlc3QubWV0aG9kID09PSBcIkdFVFwiIHx8IHJlcXVlc3QubWV0aG9kID09PSBcIkhFQURcIikpOlxuICAgICAgICAgICAgICAgICAgICAgICAgZ2V0X2FwaV91c2VycyhyZXF1ZXN0LHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAvLyBjcmVhdGUgbmV3IHVzZXIgKHBvc3QgcmVxdWVzdClcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAocmVxdWVzdC51cmwgPT09ICcvYXBpL3VzZXJzJyAmJiByZXF1ZXN0Lm1ldGhvZCA9PT0gXCJQT1NUXCIpOlxuICAgICAgICAgICAgICAgICAgICAgICAgY3JlYXRlX3VzZXJzKHJlcXVlc3QscmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIC8vIGdldCB1c2VyIGZyb20gdXVpZFxuICAgICAgICAgICAgICAgICAgICBjYXNlICggKHJlcXVlc3QudXJsLm1hdGNoKFwiL2FwaS91c2Vycy9bYS16QS1aMC05XFwtXSskXCIpP3RydWU6bnVsbCkgJiYgKHJlcXVlc3QubWV0aG9kID09PSBcIkdFVFwiIHx8IHJlcXVlc3QubWV0aG9kID09PSBcIkhFQURcIikpOlxuICAgICAgICAgICAgICAgICAgICAgICAgZ2V0X3VzZXIgKHJlcXVlc3QscmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIC8vIGVkaXQgdXNlciBkYXRhXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgKCAocmVxdWVzdC51cmwubWF0Y2goXCIvYXBpL3VzZXJzL1thLXpBLVowLTlcXC1dKyRcIik/dHJ1ZTpudWxsKSAmJiByZXF1ZXN0Lm1ldGhvZCA9PT0gXCJQVVRcIik6XG4gICAgICAgICAgICAgICAgICAgICAgICBnZXRfdXNlciAocmVxdWVzdCxyZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgLy8gZGVsZXRlIHVzZXJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAoIChyZXF1ZXN0LnVybC5tYXRjaChcIi9hcGkvdXNlcnMvW2EtekEtWjAtOVxcLV0rJFwiKT90cnVlOm51bGwpICYmIHJlcXVlc3QubWV0aG9kID09PSBcIkRFTEVURVwiKTpcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZV91c2VyIChyZXF1ZXN0LCByZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgLy8gbm90IGZvdW5kIHVybCBhcGlcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZHBvaW50c19ub3RfZm91bmQocmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgfWNhdGNoKGVycikge1xuICAgICAgICAgICAgcmVzcG9uc2Uud3JpdGVIZWFkKEpTT04ucGFyc2UoZXJyLm1lc3NhZ2UpLnN0YXR1c0NvZGUpO1xuICAgICAgICAgICAgcmVzcG9uc2Uud3JpdGUoZXJyLm1lc3NhZ2UpO1xuICAgICAgICAgICAgcmVzcG9uc2UuZW5kKFwiXFxuXCIpO1xuICAgICAgICB9XG59KS5saXN0ZW4oUE9SVCwgXCIxMjcuMC4wLjFcIiwoKT0+e1xuICAgIGNvbnNvbGUubG9nKFwiU3RhcnQgaHR0cCBzZXJ2ZXIhXCIpO1xuICAgIGNvbnNvbGUubG9nKFwi0KHQtdGA0LLQtdGAINC90LDRh9Cw0Lsg0L/RgNC+0YHQu9GD0YjQuNCy0LDQvdC40LUg0LfQsNC/0YDQvtGB0L7QsiDQvdCwINC/0L7RgNGC0YMgXCIgKyBQT1JUKTtcbn0pO1xuXG4vLyBoYW5kbGVyIG5vdCBmb3VuZCBlbmRwb2ludCBhcGlcbmNvbnN0IGVuZHBvaW50c19ub3RfZm91bmQgPSAocmVzcG9uc2UpID0+IHtcbiAgICBwcm9jZXNzLnN0ZG91dC53cml0ZShcIlN0YXR1czogNDA0XFxuUmVzcG9uc2U6IGVuZHBvaW50cyBub3QgZm91bmRcXG5cIik7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSB7XG4gICAgICAgICAgICBzdGF0dXNDb2RlOiA0MDQsXG4gICAgICAgICAgICBtZXNzYWdlOiBcIlVyaSBhcGkgaHR0cCBub3QgZm91bmRcIlxuICAgICAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yIChKU09OLnN0cmluZ2lmeShtZXNzYWdlKSk7XG59XG5cbi8vIGdldCBhbGwgdXNlcnMgKGdldCByZXF1ZXN0KVxuY29uc3QgZ2V0X2FwaV91c2VycyA9IChyZXF1ZXN0LHJlc3BvbnNlKSA9PiB7XG4gICAgcHJvY2Vzcy5zdGRvdXQud3JpdGUoXCJTdGF0dXM6IDIwMFxcblJlc3BvbnNlOiByZXF1ZXN0IHN1Y2Nlc3NcXG5cIilcbiAgICByZXNwb25zZS5zdGF0dXNDb2RlPTIwMDtcbiAgICByZXNwb25zZS53cml0ZShKU09OLnN0cmluZ2lmeSh1c2VycykgKyBcIlxcblwiKTtcbiAgICByZXNwb25zZS5lbmQoKTtcbn1cbi8vIGNyZWF0ZSBuZXcgdXNlciAocG9zdCByZXF1ZXN0KVxuY29uc3QgY3JlYXRlX3VzZXJzID0gKHJlcXVlc3QscmVzcG9uc2UpID0+IHtcbiAgICBsZXQgYm9keT1cIlwiO1xuICAgIHJlcXVlc3Qub24oJ2RhdGEnLCAoY2h1bmspID0+IHtcbiAgICAgICAgYm9keSArPSAoY2h1bmsudG9TdHJpbmcoKSk7XG4gICAgfSlcblxuICAgIHJlcXVlc3Qub24oXCJlbmRcIiwgKCkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcHJvcCA9IHZhbGlkYXRlX3Bvc3RfZGF0YShib2R5KTtcbiAgICAgICAgICAgIC8vINCR0YDQvtGB0LDQvCDQuNGB0LrQu9GO0YfQtdC90LjQtSDQtdGB0LvQuCDQv9C+0LvRg9GH0LXQvdC90YvQtSBqc29uINC00LDQvdC90YvQtSDQvdC1INC/0L7Qu9C90L7RgdGC0YzRjiDQt9Cw0L/QvtC70L3QtdC90YtcbiAgICAgICAgICAgIGlmKCBwcm9wLnN0YXR1c0NvZGUgKSB0aHJvdyBuZXcgRXJyb3IoSlNPTi5zdHJpbmdpZnkocHJvcCkpO1xuICAgICAgICAgICAgcHJvcC51dWlkID0gcmFuZG9tVVVJRCgpOyBcbiAgICAgICAgICAgIHVzZXJzLnB1c2gocHJvcCk7ICBcbiAgICAgICAgICAgIHByb2Nlc3Muc3Rkb3V0LndyaXRlKFwiU3RhdHVzOiAyMDFcXG5SZXNwb25zZTogY3JlYXRlIHVzZXIgc3VjY2Vzc1xcblwiKVxuICAgICAgICAgICAgICAgIHJlc3BvbnNlLndyaXRlSGVhZCgyMDEpO1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlLndyaXRlKEpTT04uc3RyaW5naWZ5KHByb3ApKTtcbiAgICAgICAgICAgICAgICByZXNwb25zZS5lbmQoXCJcXG5cIik7XG4gICAgICAgIH1jYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICByZXNwb25zZS53cml0ZUhlYWQoSlNPTi5wYXJzZShlcnIubWVzc2FnZSkuc3RhdHVzQ29kZSk7XG4gICAgICAgICAgICByZXNwb25zZS53cml0ZShlcnIubWVzc2FnZSk7XG4gICAgICAgICAgICByZXNwb25zZS5lbmQoKTtcbiAgICAgICAgfVxuICAgIH0pXG59XG5cbi8vZ2V0IHVzZXIgXG5jb25zdCBnZXRfdXNlciA9IChyZXF1ZXN0LCByZXNwb25zZSkgPT4ge1xuICAgIGNvbnN0IHV1aWQgPSByZXF1ZXN0LnVybC5zcGxpdCgnLycpLnNsaWNlKC0xKS5qb2luKCk7XG4gICAgY29uc3QgdmFsaWQgPSB1dWlkX3ZhbGlkICh1dWlkKTtcbiAgICBpZiAodmFsaWQpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdXNlcnMuZmluZCAoaXRlbSA9PiBpdGVtLnV1aWQgPT09IHV1aWQpO1xuICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgICBwcm9jZXNzLnN0ZG91dC53cml0ZShcIlN0YXR1czogMjAwXFxuUmVzcG9uc2U6IGdldCB1c2VyIHN1Y2Nlc3NcXG5cIik7XG4gICAgICAgICAgICByZXNwb25zZS53cml0ZUhlYWQoMjAwKTtcbiAgICAgICAgICAgIHJlc3BvbnNlLndyaXRlKEpTT04uc3RyaW5naWZ5KHJlc3VsdCkpO1xuICAgICAgICAgICAgcmVzcG9uc2UuZW5kKFwiXFxuXCIpO1xuICAgICAgICB9ZWxzZSB7XG4gICAgICAgICAgICBwcm9jZXNzLnN0ZG91dC53cml0ZShcIlN0YXR1czogNDA0XFxuUmVzcG9uc2U6IG5vdCBmb3VuZCB1c2VyXFxuXCIpXG4gICAgICAgICAgICBjb25zdCBlcnJvciA9IHtcbiAgICAgICAgICAgICAgICBzdGF0dXNDb2RlOiA0MDQsIFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiTm90IGZvdW5kIHVzZXJzIGlzIGdldCBVVUlEXCJcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yIChKU09OLnN0cmluZ2lmeShlcnJvcikpO1xuICAgICAgICB9XG5cbiAgICB9ZWxzZSB7XG4gICAgICAgIHByb2Nlc3Muc3Rkb3V0LndyaXRlKFwiU3RhdHVzOiA0MDBcXG5SZXNwb25zZTogaW4gdmFsaWQgdXVpZFxcblwiKVxuICAgICAgICAgICAgY29uc3QgZXJyb3IgPSB7XG4gICAgICAgICAgICAgICAgc3RhdHVzQ29kZTogNDAwLCBcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIkdldCBwYXJhbWV0ciB1dWlkIG5vdCB2YWxpZFwiXG4gICAgICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihKU09OLnN0cmluZ2lmeShlcnJvcikpO1xuICAgIH1cbn1cblxuLy9kZWxldGUgdXNlclxuY29uc3QgZGVsZXRlX3VzZXIgPSAocmVxdWVzdCwgcmVzcG9uc2UpID0+IHtcbiAgICBjb25zdCB1dWlkID0gcmVxdWVzdC51cmwuc3BsaXQoJy8nKS5zbGljZSgtMSkuam9pbigpO1xuICAgIGNvbnN0IHZhbGlkID0gdXVpZF92YWxpZCAodXVpZCk7XG4gICAgXG4gICAgaWYgKHZhbGlkKSB7XG4gICAgICAgIC8vIFNlYXJjaCBpdGVtIGZvciB1dWlkXG4gICAgICAgIGNvbnN0IGluZGV4SXRlbSA9IHVzZXJzLmZpbmRJbmRleChpdGVtID0+IGl0ZW0udXVpZCA9PT0gdXVpZCk7XG4gICAgICAgIGlmIChpbmRleEl0ZW0gIT0gLTEpIHtcbiAgICAgICAgICAgIC8vIGRlbGV0ZSB1c2VyXG4gICAgICAgICAgICBjb25zdCBkZXRlbGVVc2VyID0gdXNlcnMuc3BsaWNlKGluZGV4SXRlbSwgMSk7XG4gICAgICAgICAgICBpZiAoZGVsZXRlX3VzZXIubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHByb2Nlc3Muc3Rkb3V0LndyaXRlKFwiU3RhdHVzOiAyMDRcXG5SZXNwb25zZTogZGVsZXRlIHVzZXIgc3VjY2Vzc1xcblwiKTtcbiAgICAgICAgICAgICAgICByZXNwb25zZS53cml0ZUhlYWQoMjA0KTtcbiAgICAgICAgICAgICAgICByZXNwb25zZS5lbmQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfWVsc2Uge1xuICAgICAgICAgICAgcHJvY2Vzcy5zdGRvdXQud3JpdGUoXCJTdGF0dXM6IDQwNFxcblJlc3BvbnNlOiBub3QgZm91bmQgdXNlclxcblwiKVxuICAgICAgICAgICAgY29uc3QgZXJyb3IgPSB7XG4gICAgICAgICAgICAgICAgc3RhdHVzQ29kZTogNDA0LCBcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIk5vdCBmb3VuZCB1c2VycyBpcyBnZXQgVVVJRFwiXG4gICAgICAgICAgICB9XG4gICAgICAgICAgIHRocm93IG5ldyBFcnJvciAoSlNPTi5zdHJpbmdpZnkoZXJyb3IpKTtcbiAgICAgICAgfVxuXG4gICAgfWVsc2Uge1xuICAgICAgICBwcm9jZXNzLnN0ZG91dC53cml0ZShcIlN0YXR1czogNDAwXFxuUmVzcG9uc2U6IGluIHZhbGlkIHV1aWRcXG5cIilcbiAgICAgICAgICAgIGNvbnN0IGVycm9yID0ge1xuICAgICAgICAgICAgICAgIHN0YXR1c0NvZGU6IDQwMCwgXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogXCJHZXQgcGFyYW1ldHIgdXVpZCBub3QgdmFsaWRcIlxuICAgICAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoSlNPTi5zdHJpbmdpZnkoZXJyb3IpKTtcbiAgICB9XG5cblxufSIsIi8vIGhhbmRsZXIgY3RybCtjXG5wcm9jZXNzLm9uKFwiU0lHSU5UXCIsIChkYXRhKSA9PiB7XG4gICAgcHJvY2Vzcy5leGl0KCk7XG59KTtcbnByb2Nlc3Mub24gKFwiZXhpdFwiLCAoZGF0YSk9PiB7XG4gICAgY29uc29sZS5sb2coXCJcXG5TZXJ2ZXIgaXMgc3RvcGVkXCIpO1xufSkiLCJjb25zdCB1dWlkX3ZhbGlkID0gKGRhdGEpID0+IHtcbiAgICAvLyBSZWd1bGFyIGV4cHJlc3Npb24gdG8gY2hlY2sgaWYgc3RyaW5nIGlzIGEgdmFsaWQgVVVJRFxuICAgICAgICAgICAgY29uc3QgcmVnZXhFeHAgPSBbXG4gICAgICAgICAgICAgICAgICAgICAgICAvXlswLTlhLWZBLUZdezh9LVswLTlhLWZBLUZdezR9LVsxXVswLTlhLWZBLUZdezN9LVs4OUFCXVswLTlhLWZBLUZdezN9LVswLTlhLWZBLUZdezEyfSQvZ2ksXG4gICAgICAgICAgICAgICAgICAgICAgICAvXlswLTlhLWZBLUZdezh9LVswLTlhLWZBLUZdezR9LVsyXVswLTlhLWZBLUZdezN9LVs4OUFCXVswLTlhLWZBLUZdezN9LVswLTlhLWZBLUZdezEyfSQvZ2ksXG4gICAgICAgICAgICAgICAgICAgICAgICAvXlswLTlhLWZBLUZdezh9LVswLTlhLWZBLUZdezR9LVszXVswLTlhLWZBLUZdezN9LVs4OUFCXVswLTlhLWZBLUZdezN9LVswLTlhLWZBLUZdezEyfSQvZ2ksXG4gICAgICAgICAgICAgICAgICAgICAgICAvXlswLTlhLWZBLUZdezh9LVswLTlhLWZBLUZdezR9LVs0XVswLTlhLWZBLUZdezN9LVs4OUFCXVswLTlhLWZBLUZdezN9LVswLTlhLWZBLUZdezEyfSQvZ2ksXG4gICAgICAgICAgICAgICAgICAgICAgICAvXlswLTlhLWZBLUZdezh9LVswLTlhLWZBLUZdezR9LVs1XVswLTlhLWZBLUZdezN9LVs4OUFCXVswLTlhLWZBLUZdezN9LVswLTlhLWZBLUZdezEyfSQvZ2ksXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgLy8gZmluZCBpbiBhcnJheSBcbiAgICAgICAgICAgICAgICBjb25zdCB2YWxpZCA9IHJlZ2V4RXhwLmZpbmQoIGl0ZW0gPT4gaXRlbS50ZXN0KGRhdGEpID09PSB0cnVlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gKHZhbGlkKT90cnVlOmZhbHNlO1xufVxuXG4vLyBoYW5kbGVyIG5vdCB2YWxpZGF0ZSBwb3N0IHJlcXVlc3RcbmNvbnN0IHZhbGlkYXRlX3Bvc3RfZGF0YSA9IChib2R5KSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgZGF0YSA9IEpTT04ucGFyc2UoYm9keSk7XG4gICAgICAgIGlmKHR5cGVvZiBkYXRhLmFnZSA9PT0gJ251bWJlcicgJiYgdHlwZW9mIGRhdGEudXNlcm5hbWUgPT09ICdzdHJpbmcnICYmIEFycmF5LmlzQXJyYXkoZGF0YS5ob2JiaWVzKSkge1xuICAgICAgICAgICAgLy8gY2hlY2sgYXJyYXkgb25seSBzdHJpbmcgdHlwZSBpdGVtXG4gICAgICAgICAgICBpZiAoIWRhdGEuaG9iYmllcy5maW5kKCBpdGVtID0+IHR5cGVvZiBpdGVtICE9PSAnc3RyaW5nJykpe1xuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHByb2Nlc3Muc3Rkb3V0LndyaXRlKFwiU3RhdHVzOiA0MDBcXG5FcnJvciB2YWxpZGF0ZSByZXF1ZXN0IGJvZHkuIENoZWNrIGZvciByZXF1aXJlZCBmaWVsZHNcXG5cIik7XG4gICAgICAgICAgICBjb25zdCBlcnJvciA9IHtcbiAgICAgICAgICAgICAgICBzdGF0dXNDb2RlOiA0MDAsIFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiRXJyb3IgdmFsaWRhdGUgcmVxdWVzdCBib2R5LiBDaGVjayBmb3IgcmVxdWlyZWQgZmllbGRzXCJcbiAgICAgICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGVycm9yO1xuICAgIH1jYXRjaCAoZSkge1xuICAgICAgICBwcm9jZXNzLnN0ZG91dC53cml0ZShcIlN0YXR1czogNDAwXFxuXCIrZS5tZXNzYWdlK1wiXFxuXCIpO1xuICAgICAgICAgICAgY29uc3QgZXJyb3IgPSB7XG4gICAgICAgICAgICAgICAgc3RhdHVzQ29kZTogNDAwLCBcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBlLm1lc3NhZ2VcbiAgICAgICAgICAgIH1cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKEpTT04uc3RyaW5naWZ5KGVycm9yKSk7XG4gICAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSB7IHV1aWRfdmFsaWQsIHZhbGlkYXRlX3Bvc3RfZGF0YSB9OyIsImNvbnN0IGZzID0gcmVxdWlyZSgnZnMnKVxuY29uc3QgcGF0aCA9IHJlcXVpcmUoJ3BhdGgnKVxuY29uc3Qgb3MgPSByZXF1aXJlKCdvcycpXG5jb25zdCBwYWNrYWdlSnNvbiA9IHJlcXVpcmUoJy4uL3BhY2thZ2UuanNvbicpXG5cbmNvbnN0IHZlcnNpb24gPSBwYWNrYWdlSnNvbi52ZXJzaW9uXG5cbmNvbnN0IExJTkUgPSAvKD86XnxeKVxccyooPzpleHBvcnRcXHMrKT8oW1xcdy4tXSspKD86XFxzKj1cXHMqP3w6XFxzKz8pKFxccyonKD86XFxcXCd8W14nXSkqJ3xcXHMqXCIoPzpcXFxcXCJ8W15cIl0pKlwifFxccypgKD86XFxcXGB8W15gXSkqYHxbXiNcXHJcXG5dKyk/XFxzKig/OiMuKik/KD86JHwkKS9tZ1xuXG4vLyBQYXJzZXIgc3JjIGludG8gYW4gT2JqZWN0XG5mdW5jdGlvbiBwYXJzZSAoc3JjKSB7XG4gIGNvbnN0IG9iaiA9IHt9XG5cbiAgLy8gQ29udmVydCBidWZmZXIgdG8gc3RyaW5nXG4gIGxldCBsaW5lcyA9IHNyYy50b1N0cmluZygpXG5cbiAgLy8gQ29udmVydCBsaW5lIGJyZWFrcyB0byBzYW1lIGZvcm1hdFxuICBsaW5lcyA9IGxpbmVzLnJlcGxhY2UoL1xcclxcbj8vbWcsICdcXG4nKVxuXG4gIGxldCBtYXRjaFxuICB3aGlsZSAoKG1hdGNoID0gTElORS5leGVjKGxpbmVzKSkgIT0gbnVsbCkge1xuICAgIGNvbnN0IGtleSA9IG1hdGNoWzFdXG5cbiAgICAvLyBEZWZhdWx0IHVuZGVmaW5lZCBvciBudWxsIHRvIGVtcHR5IHN0cmluZ1xuICAgIGxldCB2YWx1ZSA9IChtYXRjaFsyXSB8fCAnJylcblxuICAgIC8vIFJlbW92ZSB3aGl0ZXNwYWNlXG4gICAgdmFsdWUgPSB2YWx1ZS50cmltKClcblxuICAgIC8vIENoZWNrIGlmIGRvdWJsZSBxdW90ZWRcbiAgICBjb25zdCBtYXliZVF1b3RlID0gdmFsdWVbMF1cblxuICAgIC8vIFJlbW92ZSBzdXJyb3VuZGluZyBxdW90ZXNcbiAgICB2YWx1ZSA9IHZhbHVlLnJlcGxhY2UoL14oWydcImBdKShbXFxzXFxTXSopXFwxJC9tZywgJyQyJylcblxuICAgIC8vIEV4cGFuZCBuZXdsaW5lcyBpZiBkb3VibGUgcXVvdGVkXG4gICAgaWYgKG1heWJlUXVvdGUgPT09ICdcIicpIHtcbiAgICAgIHZhbHVlID0gdmFsdWUucmVwbGFjZSgvXFxcXG4vZywgJ1xcbicpXG4gICAgICB2YWx1ZSA9IHZhbHVlLnJlcGxhY2UoL1xcXFxyL2csICdcXHInKVxuICAgIH1cblxuICAgIC8vIEFkZCB0byBvYmplY3RcbiAgICBvYmpba2V5XSA9IHZhbHVlXG4gIH1cblxuICByZXR1cm4gb2JqXG59XG5cbmZ1bmN0aW9uIF9sb2cgKG1lc3NhZ2UpIHtcbiAgY29uc29sZS5sb2coYFtkb3RlbnZAJHt2ZXJzaW9ufV1bREVCVUddICR7bWVzc2FnZX1gKVxufVxuXG5mdW5jdGlvbiBfcmVzb2x2ZUhvbWUgKGVudlBhdGgpIHtcbiAgcmV0dXJuIGVudlBhdGhbMF0gPT09ICd+JyA/IHBhdGguam9pbihvcy5ob21lZGlyKCksIGVudlBhdGguc2xpY2UoMSkpIDogZW52UGF0aFxufVxuXG4vLyBQb3B1bGF0ZXMgcHJvY2Vzcy5lbnYgZnJvbSAuZW52IGZpbGVcbmZ1bmN0aW9uIGNvbmZpZyAob3B0aW9ucykge1xuICBsZXQgZG90ZW52UGF0aCA9IHBhdGgucmVzb2x2ZShwcm9jZXNzLmN3ZCgpLCAnLmVudicpXG4gIGxldCBlbmNvZGluZyA9ICd1dGY4J1xuICBjb25zdCBkZWJ1ZyA9IEJvb2xlYW4ob3B0aW9ucyAmJiBvcHRpb25zLmRlYnVnKVxuICBjb25zdCBvdmVycmlkZSA9IEJvb2xlYW4ob3B0aW9ucyAmJiBvcHRpb25zLm92ZXJyaWRlKVxuXG4gIGlmIChvcHRpb25zKSB7XG4gICAgaWYgKG9wdGlvbnMucGF0aCAhPSBudWxsKSB7XG4gICAgICBkb3RlbnZQYXRoID0gX3Jlc29sdmVIb21lKG9wdGlvbnMucGF0aClcbiAgICB9XG4gICAgaWYgKG9wdGlvbnMuZW5jb2RpbmcgIT0gbnVsbCkge1xuICAgICAgZW5jb2RpbmcgPSBvcHRpb25zLmVuY29kaW5nXG4gICAgfVxuICB9XG5cbiAgdHJ5IHtcbiAgICAvLyBTcGVjaWZ5aW5nIGFuIGVuY29kaW5nIHJldHVybnMgYSBzdHJpbmcgaW5zdGVhZCBvZiBhIGJ1ZmZlclxuICAgIGNvbnN0IHBhcnNlZCA9IERvdGVudk1vZHVsZS5wYXJzZShmcy5yZWFkRmlsZVN5bmMoZG90ZW52UGF0aCwgeyBlbmNvZGluZyB9KSlcblxuICAgIE9iamVjdC5rZXlzKHBhcnNlZCkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICBpZiAoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChwcm9jZXNzLmVudiwga2V5KSkge1xuICAgICAgICBwcm9jZXNzLmVudltrZXldID0gcGFyc2VkW2tleV1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChvdmVycmlkZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgIHByb2Nlc3MuZW52W2tleV0gPSBwYXJzZWRba2V5XVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGRlYnVnKSB7XG4gICAgICAgICAgaWYgKG92ZXJyaWRlID09PSB0cnVlKSB7XG4gICAgICAgICAgICBfbG9nKGBcIiR7a2V5fVwiIGlzIGFscmVhZHkgZGVmaW5lZCBpbiBcXGBwcm9jZXNzLmVudlxcYCBhbmQgV0FTIG92ZXJ3cml0dGVuYClcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgX2xvZyhgXCIke2tleX1cIiBpcyBhbHJlYWR5IGRlZmluZWQgaW4gXFxgcHJvY2Vzcy5lbnZcXGAgYW5kIHdhcyBOT1Qgb3ZlcndyaXR0ZW5gKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG5cbiAgICByZXR1cm4geyBwYXJzZWQgfVxuICB9IGNhdGNoIChlKSB7XG4gICAgaWYgKGRlYnVnKSB7XG4gICAgICBfbG9nKGBGYWlsZWQgdG8gbG9hZCAke2RvdGVudlBhdGh9ICR7ZS5tZXNzYWdlfWApXG4gICAgfVxuXG4gICAgcmV0dXJuIHsgZXJyb3I6IGUgfVxuICB9XG59XG5cbmNvbnN0IERvdGVudk1vZHVsZSA9IHtcbiAgY29uZmlnLFxuICBwYXJzZVxufVxuXG5tb2R1bGUuZXhwb3J0cy5jb25maWcgPSBEb3RlbnZNb2R1bGUuY29uZmlnXG5tb2R1bGUuZXhwb3J0cy5wYXJzZSA9IERvdGVudk1vZHVsZS5wYXJzZVxubW9kdWxlLmV4cG9ydHMgPSBEb3RlbnZNb2R1bGVcbiIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcImNyeXB0b1wiKTsiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJmc1wiKTsiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJodHRwXCIpOyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIm9zXCIpOyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcInBhdGhcIik7IiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIGh0dHAgYXBpXG5jb25zdCBhcGkgPSByZXF1aXJlKFwiLi9hcGlcIik7XG4vLyBFdmVudHNcbmNvbnN0IGV2ZW50cyA9IHJlcXVpcmUoXCIuL2V2ZW50cy5qc1wiKTtcblxuXG4iXSwibmFtZXMiOlsiaHR0cCIsInJlcXVpcmUiLCJyYW5kb21VVUlEIiwidXVpZF92YWxpZCIsInZhbGlkYXRlX3Bvc3RfZGF0YSIsIlBPUlQiLCJwcm9jZXNzIiwiZW52IiwiY29uc29sZSIsImxvZyIsImV4aXQiLCJ1c2VycyIsImNyZWF0ZVNlcnZlciIsInJlcXVlc3QiLCJyZXNwb25zZSIsInN0ZG91dCIsIndyaXRlIiwibWV0aG9kIiwidXJsIiwic2V0SGVhZGVyIiwiZ2V0X2FwaV91c2VycyIsImNyZWF0ZV91c2VycyIsIm1hdGNoIiwiZ2V0X3VzZXIiLCJkZWxldGVfdXNlciIsImVuZHBvaW50c19ub3RfZm91bmQiLCJlcnIiLCJ3cml0ZUhlYWQiLCJKU09OIiwicGFyc2UiLCJtZXNzYWdlIiwic3RhdHVzQ29kZSIsImVuZCIsImxpc3RlbiIsIkVycm9yIiwic3RyaW5naWZ5IiwiYm9keSIsIm9uIiwiY2h1bmsiLCJ0b1N0cmluZyIsInByb3AiLCJ1dWlkIiwicHVzaCIsInNwbGl0Iiwic2xpY2UiLCJqb2luIiwicmVzdWx0IiwiZmluZCIsIml0ZW0iLCJpbmRleEl0ZW0iLCJmaW5kSW5kZXgiLCJzcGxpY2UiLCJsZW5ndGgiLCJkYXRhIiwibW9kdWxlIiwiZXhwb3J0cyIsInRlc3QiLCJhZ2UiLCJ1c2VybmFtZSIsIkFycmF5IiwiaXNBcnJheSIsImhvYmJpZXMiLCJlIiwiZXJyb3IiLCJmcyIsInBhdGgiLCJvcyIsInZlcnNpb24iLCJMSU5FIiwiX2xvZyIsIkRvdGVudk1vZHVsZSIsImNvbmZpZyIsIm9wdGlvbnMiLCJkb3RlbnZQYXRoIiwicmVzb2x2ZSIsImN3ZCIsImVuY29kaW5nIiwiZGVidWciLCJCb29sZWFuIiwib3ZlcnJpZGUiLCJlbnZQYXRoIiwiaG9tZWRpciIsInBhcnNlZCIsInJlYWRGaWxlU3luYyIsIk9iamVjdCIsImtleXMiLCJmb3JFYWNoIiwia2V5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwic3JjIiwib2JqIiwibGluZXMiLCJyZXBsYWNlIiwiZXhlYyIsInZhbHVlIiwidHJpbSIsIm1heWJlUXVvdGUiLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJ1bmRlZmluZWQiLCJfX3dlYnBhY2tfbW9kdWxlc19fIl0sInNvdXJjZVJvb3QiOiIifQ==